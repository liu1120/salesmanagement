<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>主页</title>
    <link rel="stylesheet" href="/static/vendor/simple-line-icons/css/simple-line-icons.css">
    <link rel="stylesheet" href="/static/vendor/font-awesome/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/stylesOA.css">
</head>
<body class="sidebar-fixed header-fixed" onload="writeLoginInfo();ischeck()">
<div class="page-wrapper">
    <nav class="navbar page-header" style="padding-top: 0px">
        <a href="" class="btn btn-link sidebar-mobile-toggle d-md-none mr-auto">
            <i class="fa fa-bars"></i>
        </a>

        <a class="navbar-brand" href="">
            <img src="/static/imgs/logo.png" alt="logo">
        </a>

        <a href="#" class="btn btn-link sidebar-toggle d-md-down-none">
            <i class="fa fa-bars"></i>
        </a>

        <ul class="navbar-nav ml-auto">
            <li class="nav-item d-md-down-none">
                <a href="">
                    <i class="fa fa-bell"></i>
                    <span class="badge badge-pill badge-danger">6</span>
                </a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">
                    <img src="/static/imgs/avatar-1.png" class="avatar avatar-sm" alt="logo">
                    <span class="small ml-1 d-md-down-none" id="loginname" th:text="${login_username}"></span>
                </a>

                <div class="dropdown-menu dropdown-menu-right">

                    <a href="/admin/selfinfo" id="selfinfo" class="dropdown-item">
                        <i class="fa fa-user"></i> 个人信息
                    </a>

                    <a href="#" class="dropdown-item" onclick="clearLoginInfo()">
                        <i class="fa fa-lock"></i> 退出
                    </a>
                </div>
            </li>
        </ul>
    </nav>

    <div class="main-container">
        <div class="sidebar">
            <nav class="sidebar-nav">
                <ul class="nav">
                    <li class="nav-title">导航</li>

                    <li class="nav-item">
                        <a href="/admin/index" class="nav-link active">
                            <i class="icon icon-speedometer"></i> 仪表盘
                        </a>
                    </li>
                    <!--菜单开始-->
                    <!--业务统计模块-->
                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-graph"></i> 业务统计 <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="/admin/salesvolume" class="nav-link">
                                    <i class="icon icon-graph"></i>&nbsp;&nbsp;产品销量
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/admin/sellersvolume" class="nav-link">
                                    <i class="icon icon-graph"></i>&nbsp;&nbsp;销售员业绩
                                </a>
                            </li>
                            <!--<li class="nav-item">-->
                            <!--<a href="/admin/areavolume" class="nav-link">-->
                            <!--<i class="icon icon-graph"></i>&nbsp;&nbsp;地区销量-->
                            <!--</a>-->
                            <!--</li>-->
                        </ul>
                    </li>
                    <!--活动管理模块-->
                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-target"></i> 活动管理模块 <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <ul class="nav-dropdown-items">
                                <li class="nav-item">
                                    <a href="/admin/activity" class="nav-link">
                                        <i class="icon icon-target"></i>&nbsp;&nbsp;促销活动
                                    </a>
                                </li>

                                <li class="nav-item">
                                    <a href="/admin/gift" class="nav-link">
                                        <i class="icon icon-target"></i>&nbsp;&nbsp;礼品领取记录
                                    </a>
                                </li>

                            </ul>
                        </ul>
                    </li>
                    <!--农产品管理模块-->
                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-energy"></i> 农产品管理 <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="/admin/getAllgoods?pageNo=1" class="nav-link">
                                    <i class="icon icon-energy"></i> &nbsp;&nbsp;农产品列表
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/admin/addGoods" class="nav-link">
                                    <i class="icon icon-energy"></i> &nbsp;&nbsp;增加新农产品
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/admin/order" class="nav-link active">
                                    <i class="icon icon-energy active"></i> &nbsp;&nbsp;订单列表
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="/admin/orderservice" class="nav-link">
                                    <i class="icon icon-energy"></i> &nbsp;&nbsp;退货列表
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!--人事管理模块-->
                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-puzzle"></i> 人事管理 <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="/admin/info" class="nav-link">
                                    <i class="icon icon-puzzle"></i> &nbsp;&nbsp;信息管理
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="/admin/attendce" class="nav-link">
                                    <i class="icon icon-puzzle"></i> &nbsp;&nbsp;考勤记录
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="/admin/left" class="nav-link">
                                    <i class="icon icon-puzzle"></i>&nbsp;&nbsp; 出差审核
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-title">More</li>
                    <li class="nav-item">
                        <a href="/admin/suggest" class="nav-link">
                            <i class="icon icon-grid"></i>投诉与建议
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/question" class="nav-link">
                            <i class="icon icon-grid"></i> 技术咨询
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <!--模板结束11111-->

                        <div class="wrapper wrapper-content animated fadeInRight">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="ibox float-e-margins">
                                        <div class="ibox-title">
                                            <h5>订单列表</h5>
                                        </div>
                                        <div class="ibox-content">
                                            <div class="form-group">
                                                <div class="row">
                                                    <!--<div class="col-md-4">-->
                                                    <!--<select id="single-select" class="form-control">-->
                                                    <!--<option>全部订单</option>-->
                                                    <!--<option>今日订单</option>-->
                                                    <!--<option>本周订单</option>-->
                                                    <!--<option>本月订单</option>-->
                                                    <!--</select>-->
                                                    <!--</div>-->

                                                    <div class="col-md-4">
                                                        <!--下单审核状态：0待审核，1审核通过，2审核拒绝-->
                                                        <select id="single-type" name="type" class="form-control">
                                                            <option value="8">订单状态</option>
                                                            <option value="0">待审核</option>
                                                            <option value="1">通过</option>
                                                            <option value="2">拒绝</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <br>
                                                <table class="table table-striped table-bordered table-hover dataTables-example">
                                                    <thead>
                                                    <tr>
                                                        <th>订单号</th>
                                                        <th>图片</th>
                                                        <th>农产品</th>
                                                        <th>数量</th>
                                                        <th>单价</th>
                                                        <th>实付</th>
                                                        <th>下单时间</th>
                                                        <th>订单状态</th>
                                                        <th>货物状态</th>
                                                        <!--<th>折扣</th>-->
                                                        <th>留言</th>
                                                        <th>操作</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <!--style="min-width:986"-->
                                                    <tr class="gradeA" th:each="ord : ${order}">
                                                        <td th:text="${ord.orId}"></td>
                                                        <td>
                                                            <img th:src="@{${ord.gimg}}"
                                                                 style="width: 35px;height: 45px"/>
                                                        </td>
                                                        <td th:text="${ord.gname}"></td>
                                                        <td th:text="${ord.orCount}"></td>
                                                        <td th:text="${ord.orPrice}"></td>
                                                        <td th:text="${ord.orTotalAmount}"></td>

                                                        <td th:text="${ord.orDatetimeStr}">7</td>
                                                        <!--下单审核状态：0待审核，1审核通过，2审核拒绝-->
                                                        <td th:if="${ord.orType} eq 0">待审核</td>
                                                        <td th:if="${ord.orType} eq 1">审核通过</td>
                                                        <td th:if="${ord.orType} eq 2">审核拒绝</td>
                                                        <!--0未付款,1已付款，2待发货,3已发货,4已签收,5退货中,6已退货，7完成交易。8已完成评价-->
                                                        <td th:if="${ord.orStatus} eq 0">未付款</td>
                                                        <td th:if="${ord.orStatus} eq 1">已付款</td>
                                                        <td th:if="${ord.orStatus} eq 2">待发货</td>
                                                        <td th:if="${ord.orStatus} eq 3">已发货</td>
                                                        <td th:if="${ord.orStatus} eq 4">已签收</td>
                                                        <td th:if="${ord.orStatus} eq 5">退货中</td>
                                                        <td th:if="${ord.orStatus} eq 6">已退货</td>
                                                        <td th:if="${ord.orStatus} eq 7">完成交易</td>
                                                        <td th:if="${ord.orStatus} eq 8">已完成评价</td>
                                                        <td th:if="${ord.orStatus} eq null"></td>

                                                        <td th:text="${ord.orWords}"></td>
                                                        <td>
                                                            <a th:href="@{selectGoodsById(id=${ord.orId})}" class="btn btn-info">查看</a>&nbsp;&nbsp;
                                                            <a th:href="@{updateGoods(id=${ord.orId})}" th:if="${ord.orType} eq 1" class="btn btn-primary">发货</a>&nbsp;&nbsp;
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <div>
                                                    <div>
							                    <span style="float: left; padding: 5px">
                                                    总共&nbsp;<b th:text="${total}"></b>&nbsp;条
                                                </span>
                                                        <span style="float: left; padding: 5px">
								当前&nbsp;<span style="color: red;" th:text="${page}">1</span>
                                &nbsp;/&nbsp; <b th:text="${totalPage}">1</b>&nbsp;页&nbsp;&nbsp;
                            </span>
                                                        <nav aria-label="Page navigation"
                                                             style="margin: 0 auto; width: 240px">
                                                            <ul class="pagination" style="margin: 0;">
                                                                <li th:each="array:${arr}">
                                                                    <a th:href="@{order(pageNo=${array},type=${status})}"
                                                                       th:text="${array}">view</a>
                                                                </li>
                                                            </ul>
                                                        </nav>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!--模板开始22222-->
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="/static/vendor/jquery/jquery.min.js"></script>
        <script src="/static/vendor/popper.js/popper.min.js"></script>
        <script src="/static/vendor/bootstrap/js/bootstrap.min.js"></script>
        <script src="/static/js/carbon.js"></script>
    </div>
</body>
<script type="text/javascript" src="/static/js/adminjq.js"></script>
<script type="text/javascript" src="/static/js/admin.js"></script>
<script type="text/javascript" th:inline="javascript">
    function writeLoginInfo() {
        var local_username = localStorage.getItem("login_username");
        var e = document.getElementById("loginname");
        console.log("local_username:" + local_username);
        e.innerText = local_username;

        var login_username = [[${login_username}]];
        console.log("login_username:" + login_username);
        if (login_username != undefined) {
            localStorage.setItem("login_username", login_username);
            e.innerText = login_username;
        }
        var selfinfo = document.getElementById("selfinfo");
        selfinfo.href = "/admin/selfinfo?str=" + e.innerText;
        console.log("selfinfo.href" + selfinfo.href)
    }
    function ischeck() {
        var id = [[${status}]];
        var s1 = document.getElementById("single-type");
        console.log("s1.options[i].value:"+id)
        for (i = 0; i <= s1.options.length; i++) {
            console.log("s1.options[i].value:"+s1.options[i].value)
            if (s1.options[i].value == id) {
                s1.options[i].selected = true;
            }
        }
    }
</script>
<script type="text/javascript" th:inline="javascript">
    $("#single-type").change(function(){
        var type=$("#single-type").val();
        var pageNo=[[${pageNo}]];
        console.log("type:"+type);
        if(pageNo!=null){
            window.location.href="order?type="+type+"&pageNo="+[[${pageNo}]];
        }else{
            window.location.href="order?type="+type;
        }
    });
</script>
</html>
